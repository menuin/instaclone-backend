# ğŸ‘» DEVLOG 7/12

### #6.14 See photo comments

- photos.typeDefs ì— comment(numOfComments, to be exact) ì¶”ê°€ (type Photo) 

  `comments : Int!`

- photos.resolvers >> comments

- seePhotosCommentë¥¼ comments  í´ë” ë‚´ì— ë§Œë“¤ì§€ photos í´ë” ë‚´ì— ë§Œë“¤ì§€ >> ëª¨ë¸ë§ ë¬¸ì œ



**without pagination** - ë°ì´í„°ë² ì´ìŠ¤ì— ë¶€í•˜

```js
// seePhotoComments.resolvers
seePhotoComments: (_, { id }) => client.photo.findUnique({
            where: {
                id,
            },
        }).Comment(),
```

**with pagination**

```js
 seePhotoComments: (_, { id }) => client.comment.findMany({
            where: {
                photoId: id,
            },
     		skip: ~
     		take : ~
            orderBy: {
                createdAt: "asc",
            }
        })
```

- ì™œ êµ³ì´ seePhotoCommentsë¥¼ ë§Œë“¤ì—ˆëŠ”ê°€ (seePhotoLikesë„ ë§ˆì°¬ê°€ì§€)

  ```js
  seePhoto { // ì´ë ‡ê²Œ í™•ì¸í•  ìˆ˜ë„ ìˆìŒ
      comments (page:1){
          id
          caption
      }
  }
  ```

  - ì¸ìŠ¤íƒ€ê·¸ë¨ì—ì„œ commentëŠ” ì‚¬ì§„ì„ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€ì™€ ë‹¤ë¥¸ í˜ì´ì§€ì„(ë‹¤ë¥¸ í˜ì´ì§€ë¡œ ë„˜ì–´ê°) -> ë˜ë‹¤ë¥¸ resolverê°€ ì‹¤í–‰ë˜ëŠ” ê²ƒìœ¼ë¡œ íŒë‹¨
  - í•œ í™”ë©´ì—ì„œ ë³´ì—¬ì£¼ê³  ì‹¶ìœ¼ë©´ typeDefsì— `comments : [Comment]`ë¼ê³  ì ì—ˆì„ê²ƒì„



### #6.15 isMine

- loggedInUserëŠ” nullì¸ ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸ì—(ë¡œê·¸ì¸ì•ˆí–ˆì„ê²½ìš°) í•­ìƒ ë¶„ê¸°ë¥¼ í•´ì¤˜ì•¼í•¨

```js
// photos.resolvers
isMine: ({ userId }, _, { loggedInUser }) => {
            if (!loggedInUser) {
                return false;
            }
            return userId === loggedInUser.id;
        }
```

- comments.resolversì—ë„ ë¶™ì—¬ë„£ê¸°

### #6.16 Delete comment and photos

- deletePhoto
  1. photoê°€ ì—†ì„ ê²½ìš° > error
  2. ì‚­ì œí•˜ë ¤ëŠ” photoì˜ ì£¼ì¸(userId)ì´ ë¡œê·¸ì¸í•œ ìœ ì €ì™€ ë¶ˆì¼ì¹˜(loggedInUser.id) > error
  3. else > delete
- deleteCommentë„ ë¹„ìŠ·



### #6.17 editComment

- editComment.resolvers/typeDefs  ì½”ë“œ í™•ì¸

- í•œê°€ì§€ ë¶ˆí¸í•œì : `ok:Boolean! error:String`ì„ ë°˜ë³µí•˜ê³  ìˆìŒ

  - DeleteCommentResultë‚˜ editCommentResult ë‚˜ ëª¨ë“  Resultì˜ ë‚´ìš©ë¬¼ì´ ë˜‘ê°™ê¸° ë•Œë¬¸ì— í•˜ë‚˜ì˜ mutation responseë¥¼ ìƒì„±

  ```js
  // shared/shared.typeDefs.js
  import { gql } from "apollo-server";
  
  export default gql`
      type MutationResponse {
          ok:Boolean!
          error : String
      }
  `
  ```

- graphql combines all types, so you don't need to import `MutationResponse`

```js
// deleteComment.typeDefs

type Mutation {
        deleteComment(id:Int!) : MutationResponse!
    }
```

